<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flower Management System</title>
</head>
<body>
    <h1>Flower Management System</h1>

    <h2>Create Flower</h2>
    <form id="create-flower-form" method="post" action="/create_flower/">
        <label for="supplier_name">Supplier Name:</label>
        <input type="text" id="supplier_name" name="supplier_name" required><br><br>
        <label for="name">Flower Name:</label>
        <input type="text" id="name" name="name" required><br><br>
        <label for="type">Flower Type:</label>
        <input type="text" id="type" name="type" required><br><br>
        <label for="country">Country:</label>
        <input type="text" id="country" name="country" required><br><br>
        <label for="blooming_season">Blooming Season:</label>
        <input type="text" id="blooming_season" name="blooming_season" required><br><br>
        <label for="variant">Variant:</label>
        <input type="text" id="variant" name="variant" required><br><br>
        <label for="price">Price:</label>
        <input type="number" step="0.01" id="price" name="price" required><br><br>
        <button type="submit">Create</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            function submitCreateFlowerForm() {
                const form = document.getElementById('create-flower-form');
                const supplierName = document.getElementById('supplier_name').value;
                form.action = /create_flower/${supplierName};
                form.submit();
            }

            window.submitCreateFlowerForm = submitCreateFlowerForm; // Определяем функцию глобально
        });
    </script>

    <h2>Get Data</h2>
    <ul>
        <li><a href="/get_all_flowers">View All Flowers</a></li>
        <li><a href="/get_all_supplier">View All Suppliers</a></li>
        <li><a href="/get_all_vendors">View All Vendors</a></li>
        <li><a href="/get_all_flowers_for_suppliers">View Flowers for Suppliers</a></li>
    </ul>

    <h2>Get Seasonal Flowers</h2>
    <form action="/get_seasonal_flowers/seasonal" method="get">
        <label for="seasonal">Seasonal:</label>
        <input type="text" id="seasonal" name="seasonal"><br><br>
        <button type="submit">Get Seasonal Flowers</button>
    </form>

    <h2>Get Flowers for Country</h2>
    <form action="/get_flowers_for_country/country" method="get">
        <label for="country">Country:</label>
        <input type="text" id="country" name="country"><br><br>
        <button type="submit">Get Flowers</button>
    </form>

    <h2>Get Vendors</h2>
    <form action="/get_vendors" method="get">
        <label for="sort">Sort:</label>
        <input type="checkbox" id="sort" name="sort"><br><br>
        <label for="variant">Variant:</label>
        <input type="text" id="variant" name="variant"><br><br>
        <button type="submit">Get Vendors</button>
    </form>

    <h2>Delete Flower</h2>
    <form action="javascript:deleteFlower()">
        <label for="name_supplier_delete">Supplier Name:</label>
        <input type="text" id="name_supplier_delete" name="name_supplier"><br><br>
        <label for="name_delete">Flower Name:</label>
        <input type="text" id="name_delete" name="name"><br><br>
        <button type="submit">Delete</button>
    </form>


    <script>
        function deleteFlower() {
            const name_supplier = document.getElementById('name_supplier_delete').value;
            const name = document.getElementById('name_delete').value;
            fetch(/delete_flower/${name_supplier}, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ name: name })
            }).then(response => {
                if (response.ok) {
                    alert('Flower deleted successfully');
                } else {
                    alert('Error deleting flower');
                }
            });
        }
    </script>
</body>
</html>
